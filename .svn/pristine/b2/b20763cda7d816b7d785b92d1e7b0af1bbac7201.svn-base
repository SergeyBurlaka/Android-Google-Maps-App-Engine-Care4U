package com.quest.uni2b.appengine.gsm.demo.usertouserdemo2svn020316.GCM;

import android.content.Context;
import android.content.SharedPreferences;

import com.quest.uni2b.appengine.gsm.demo.usertouserdemo2svn020316.Employee.constants.Const4ShPrfOrIntent;
import com.quest.uni2b.appengine.gsm.demo.usertouserdemo2svn020316.Employee.employeeMap.CircleLabel;
import com.quest.uni2b.appengine.gsm.demo.usertouserdemo2svn020316.Employee.spyingViaGeofence.MyGeofence;

import org.json.JSONException;
import org.json.JSONObject;

/**
 * Created by Operator on 24.03.2016.
 */
public class ParseSpyMessage {

    private JSONObject data;


    private CircleLabel сircle;
    private MyGeofence myGeofence;
    private int mId = 0;
    private Context context;


    private SharedPreferences.Editor editorCircleLoc;

    ParseSpyMessage(JSONObject data, Context context){
        this.context = context;
        this.data = data;
    }


    public MyGeofence getMyGeofence (){

        //<!--14june16
        //TODO_d+ create MyGeofence obj
        //TODO_d+: set lat-de, long-de & radius to MyGeofence object
        try {
            myGeofence = new MyGeofence(mId, data.getDouble("latitude"), data.getDouble("longitude"), (float)data.getDouble("radius"));
        } catch (JSONException e) {
            e.printStackTrace();
        }

        //-->
        return myGeofence;

    }


    public CircleLabel getСircle() {



            сircle = new CircleLabel();
        //data = new JSONObject();
        try {


          сircle.setLatitude(data.getDouble("latitude"));
            сircle.setLongitude( data.getDouble("longitude"));
            сircle.setRadius(data.getDouble("radius"));

            //<!-- 21 june 16 18:40
            //TODO_d+ 1
            //TODO_d+ also save in shared  preference
            //for GPS SERVICE

            editorCircleLoc = context.getSharedPreferences(Const4ShPrfOrIntent.CIRCLE_LOCATION, context.MODE_PRIVATE).edit();
            editorCircleLoc.putLong( Const4ShPrfOrIntent.CIRCLE_LATITUDE, Double.doubleToLongBits(data.getDouble("latitude"))) ;
            //end  commit
            editorCircleLoc.putLong( Const4ShPrfOrIntent.CIRCLE_LONGITUDE, Double.doubleToLongBits(data.getDouble("longitude"))) ;
            editorCircleLoc.putLong( Const4ShPrfOrIntent.CIRCLE_RADIUS, Double.doubleToLongBits(data.getDouble("radius"))) ;


            editorCircleLoc.commit();


            //-->


        } catch (JSONException e) {
            e.printStackTrace();
        }

        return сircle;

    }
}
